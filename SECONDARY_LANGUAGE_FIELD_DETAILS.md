# ğŸ¯ Secondary Language Field - Exact Location & Details

## Where It Is

### On the Admin Form (After Clicking "Generate Script Text")

```
The customization form appears below the selected items:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœï¸ Customize Your Podcast Script                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Selected 2 item(s):                                       â”‚
â”‚  â€¢ ğŸ“š English Mastery                                      â”‚
â”‚  â€¢ ğŸ“– Grammar Basics                                       â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“‚ Category / Subject (e.g., "Business English")   â”‚   â”‚
â”‚  â”‚ [____________________________________]             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ¯ Specific Topic (e.g., "Email writing")         â”‚   â”‚
â”‚  â”‚ [____________________________________]             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ‘¤ Your Profession (e.g., "Sales manager")        â”‚   â”‚
â”‚  â”‚ [____________________________________]             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ—£ï¸ Preferred Language *                            â”‚   â”‚
â”‚  â”‚ [English â–¼]                                        â”‚   â”‚
â”‚  â”‚  English (en)                                      â”‚   â”‚
â”‚  â”‚  Spanish (es)                                      â”‚   â”‚
â”‚  â”‚  French (fr)                                       â”‚   â”‚
â”‚  â”‚  German (de)                                       â”‚   â”‚
â”‚  â”‚  Japanese (ja)                                     â”‚   â”‚
â”‚  â”‚  Italian (it)                                      â”‚   â”‚
â”‚  â”‚  Portuguese (pt)                                   â”‚   â”‚
â”‚  â”‚  Russian (ru)                                      â”‚   â”‚
â”‚  â”‚  Korean (ko)                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸŒ Secondary Language (optional)          âœ¨ NEW!  â”‚   â”‚
â”‚  â”‚ (for comparison/bilingual content)                 â”‚   â”‚
â”‚  â”‚ [Spanish â–¼]    â† Can select any language          â”‚   â”‚
â”‚  â”‚  None - Single language only                       â”‚   â”‚
â”‚  â”‚  English (en)                                      â”‚   â”‚
â”‚  â”‚  Spanish (es)                                      â”‚   â”‚
â”‚  â”‚  French (fr)                                       â”‚   â”‚
â”‚  â”‚  German (de)                                       â”‚   â”‚
â”‚  â”‚  Japanese (ja)                                     â”‚   â”‚
â”‚  â”‚  Italian (it)                                      â”‚   â”‚
â”‚  â”‚  Portuguese (pt)                                   â”‚   â”‚
â”‚  â”‚  Russian (ru)                                      â”‚   â”‚
â”‚  â”‚  Korean (ko)                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“ Additional Notes                                â”‚   â”‚
â”‚  â”‚ [____________________________________]             â”‚   â”‚
â”‚  â”‚ [____________________________________]             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [âœï¸ Generate Script Text]  [Cancel]               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## The Secondary Language Field Details

### HTML Structure
```html
<div class="form-group">
    <label>ğŸŒ Secondary Language (optional - for comparison/bilingual content)</label>
    <select id="form-language-secondary">
        <option value="">None - Single language only</option>
        <option value="en">English</option>
        <option value="es">Spanish (EspaÃ±ol)</option>
        <option value="fr">French (FranÃ§ais)</option>
        <option value="de">German (Deutsch)</option>
        <option value="ja">Japanese (æ—¥æœ¬èª)</option>
        <option value="it">Italian (Italiano)</option>
        <option value="pt">Portuguese (PortuguÃªs)</option>
        <option value="ru">Russian (Ğ ÑƒÑÑĞºĞ¸Ğ¹)</option>
        <option value="ko">Korean (í•œêµ­ì–´)</option>
    </select>
</div>
```

### Styling (CSS)
```css
.form-group {
    margin-bottom: 12px;
}

.form-group label {
    display: block;
    font-weight: bold;
    margin-bottom: 4px;
    font-size: 12px;
    color: #333;
}

.form-group select {
    width: 100%;
    padding: 8px;
    border: 1px solid #ddd;
    border-radius: 3px;
    font-size: 12px;
    font-family: Arial, sans-serif;
    box-sizing: border-box;
}
```

### Field Position
- **Location:** Below "Preferred Language" field
- **Above:** "Additional Notes" field
- **CSS Class:** `form-group`
- **Input ID:** `form-language-secondary`
- **Default Value:** "" (empty string = no secondary language)

---

## How It Works (Step by Step)

### Step 1: User Selects Primary Language
```
User clicks on "Preferred Language" dropdown:
[English â–¼]

Selects "English"

Result: language = "en"
```

### Step 2: User Selects Secondary Language (NEW!)
```
User clicks on "Secondary Language" dropdown:
[None - Single language only â–¼]

Can choose:
- "None" (default) - English only
- "Spanish" - Bilingual English+Spanish
- "French" - Bilingual English+French
- etc.

User selects "Spanish":
[Spanish â–¼]

Result: language_secondary = "es"
```

### Step 3: Form Data Collected
```javascript
const languageSecondary = document.getElementById('form-language-secondary').value;
// Result: "es"

// Sent to backend:
{
  items: [...],
  category: "Business English",
  topic: "Email writing",
  profession: "Sales manager",
  language: "en",
  language_secondary: "es",  â† NEW!
  notes: "..."
}
```

### Step 4: Backend Processes
```python
language_secondary = data.get('language_secondary', '')
# Result: "es"

# Passed to prompt builder:
prompt = _build_multi_item_prompt(
    items=items,
    category=category,
    topic=topic,
    profession=profession,
    language=language,
    language_secondary=language_secondary,  â† NEW!
    notes=notes
)
```

### Step 5: LLM Receives Instructions
```
LLM Prompt includes:
"Language: en"
"Secondary Language: es"
"Include bilingual content in both en and es..."

LLM generates:
ENGLISH: "Follow up on the proposal"
SPANISH: "Hacer seguimiento de la propuesta"
```

---

## Field Behavior

### If Secondary Language = "" (Default)
```
Script generated in PRIMARY LANGUAGE ONLY
Example:
  "Follow up on the proposal"
  "Request action on the agreement"
  "Negotiate the timeline"
  (English only)
```

### If Secondary Language = "es" (Spanish)
```
Script generated in BOTH LANGUAGES
Example:
  "Follow up on the proposal"
  "Hacer seguimiento de la propuesta"
  
  "Request action on the agreement"
  "Solicitar acciÃ³n en el acuerdo"
  
  "Negotiate the timeline"
  "Negociar el cronograma"
  (English + Spanish)
```

### If Secondary Language = Primary Language
```
Script includes both
(AI smart enough to notice same language selected)

If Primary=English, Secondary=English:
â†’ Just English content (no duplication)
```

---

## Available Languages

| Code | Language | Native |
|------|----------|--------|
| en | English | English |
| es | Spanish | EspaÃ±ol |
| fr | French | FranÃ§ais |
| de | German | Deutsch |
| ja | Japanese | æ—¥æœ¬èª |
| it | Italian | Italiano |
| pt | Portuguese | PortuguÃªs |
| ru | Russian | Ğ ÑƒÑÑĞºĞ¸Ğ¹ |
| ko | Korean | í•œêµ­ì–´ |

### Combinations
- **All 81 combinations supported** (9 Ã— 9)
- Primary + Secondary can be any language
- Or Primary alone (Secondary = "None")

---

## Common Use Cases

### Use Case 1: Language Learning
```
Primary: Spanish (learning)
Secondary: English (native)

Result: 
"Buenos dÃ­as" (Spanish)
"Good morning" (English translation)
(Helps learn Spanish with English support)
```

### Use Case 2: Bilingual Audience
```
Primary: English
Secondary: Spanish

Result:
"Welcome to the workshop"
"Bienvenido al taller"
(Both Spanish-English speakers understand)
```

### Use Case 3: Translation Reference
```
Primary: French
Secondary: German

Result:
"Bonjour" (French)
"Guten Tag" (German)
(Compare how same concept expressed in 2 languages)
```

### Use Case 4: Single Language (Default)
```
Primary: English
Secondary: None

Result:
"This is a complete script in English only"
(No secondary language content)
```

---

## JavaScript Integration

### Capturing the Value
```javascript
function generateScriptTextFromSelection() {
    const selectedItems = document.querySelectorAll('.course-item.selected, ...');
    const category = document.getElementById('form-category').value;
    const topic = document.getElementById('form-topic').value;
    const profession = document.getElementById('form-profession').value;
    const language = document.getElementById('form-language').value;
    
    // NEW: Capture secondary language
    const languageSecondary = document.getElementById('form-language-secondary').value;
    
    const notes = document.getElementById('form-notes').value;
    
    // Send to backend
    fetch('/api/admin/ajax/generate-script/', {
        method: 'POST',
        headers: {...},
        body: JSON.stringify({
            items: items,
            category: category,
            topic: topic,
            profession: profession,
            language: language,
            language_secondary: languageSecondary,  // NEW!
            notes: notes
        })
    })
}
```

### Event Listener
```javascript
// When form appears, button gets event listener:
document.getElementById('generate-text-btn').addEventListener('click', function() {
    generateScriptTextFromSelection();  // Collects secondary language
});
```

---

## Backend Integration

### Python Function
```python
@login_required
@user_passes_test(is_admin_or_staff)
def generate_script_ajax(request):
    try:
        data = json.loads(request.body)
        
        # Capture all fields INCLUDING secondary language
        language_secondary = data.get('language_secondary', '')
        # Result: "" or "es" or "fr" or any code
        
        # Pass to prompt builder
        prompt = _build_multi_item_prompt(
            items=items,
            category=category,
            topic=topic,
            profession=profession,
            language=language,
            language_secondary=language_secondary,  # NEW!
            notes=notes
        )
        
        # Call LLM with prompt including secondary language info
        script = _generate_script_with_llm(prompt, language)
        
        return JsonResponse({
            'success': True,
            'script': script
        })
```

---

## Testing the Field

### Test 1: Field Exists
```
1. Go to admin form
2. Select user & items
3. Click "Generate Script Text"
4. âœ… Secondary Language dropdown appears
5. âœ… Has 10 options (None + 9 languages)
```

### Test 2: Default Value
```
1. Form appears
2. Check Secondary Language field
3. âœ… Default is "None - Single language only"
```

### Test 3: Can Change
```
1. Click Secondary Language dropdown
2. Select "Spanish"
3. âœ… Value changes to "es"
4. Click Generate
5. âœ… Backend receives "es"
```

### Test 4: Bilingual Generation
```
1. Fill form:
   Primary: English
   Secondary: Spanish â† NEW!
2. Click Generate
3. âœ… Script has English + Spanish content
```

### Test 5: Single Language (Backward Compatible)
```
1. Fill form:
   Primary: English
   Secondary: (leave as "None") â† Default
2. Click Generate
3. âœ… Script is English only
   (no secondary language content)
```

---

## Debugging

### If Secondary Language Not Working

**Check 1: Field Exists**
```
Browser DevTools (F12):
Elements tab â†’ Find id="form-language-secondary"
âœ… Should exist
âŒ If not, form didn't load properly
```

**Check 2: Value Captured**
```
Browser Console (F12):
> document.getElementById('form-language-secondary').value
âœ… Should return: "" or "es" or "fr" etc.
âŒ If error, field doesn't exist
```

**Check 3: Sent to Backend**
```
Network tab (F12):
POST /api/admin/ajax/generate-script/
Look at Request body (Payload)
âœ… Should have: "language_secondary": "es"
âŒ If missing, JavaScript not capturing it
```

**Check 4: Backend Received**
```
Server logs:
Check for: data.get('language_secondary', '')
âœ… Should print value
âŒ If not in logs, request malformed
```

---

## Summary

The **Secondary Language Field:**
- âœ… Located below "Preferred Language" in form
- âœ… Optional (defaults to "None")
- âœ… 9 languages + "None" option
- âœ… Captured via `form-language-secondary` ID
- âœ… Sent to backend as `language_secondary`
- âœ… Used in LLM prompts for bilingual content
- âœ… 100% backward compatible
- âœ… Ready to use now!

